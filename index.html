<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملخص مؤتمر المطورين العالمي 2025: ثورة الذكاء الاصطناعي وLiquid Glass</title>
    <meta name="description" content="اكتشف أبرز إعلانات مؤتمر المطورين العالمي 2025 من Apple: الكشف عن Apple Intelligence، لغة تصميم Liquid Glass الجديدة، تحديثات iOS 26، iPadOS 26، macOS Tahoe 26، watchOS 26، و visionOS 2.">
    <meta name="keywords" content="WWDC 2025, Apple Intelligence, Liquid Glass, iOS 26, iPadOS 26, macOS Tahoe 26, watchOS 26, visionOS 2, Apple, AI, مؤتمر المطورين العالمي 2025, ذكاء Apple, ليكويد جلاس, ابل">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap">
    <style>
        :root {
            --apple-blue: #007AFF;
            --apple-dark-blue: #0056b3;
            --light-gray: #f5f5f7;
            --dark-gray: #6e6e73;
            --text-color: #1d1d1f;
            --highlight-bg: #e0f2f7; /* Light blue for highlight boxes */
            --modal-bg: rgba(0, 0, 0, 0.7);
            --modal-content-bg: #fff;
            --navbar-height-desktop: 60px; /* Default value, adjusted by JS */
            --navbar-height-mobile: 50px; /* Default value, adjusted by JS */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans Arabic', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #fff;
            direction: rtl; /* Right-to-left for Arabic */
            text-align: right; /* Align text to the right for Arabic */
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* --- Header & Navigation --- */
        header {
            background-color: var(--apple-blue);
            color: #fff;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            text-align: center;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 900px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .logo {
            font-size: 1.8em;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 5px;
        }

        .menu-toggle .bar {
            height: 3px;
            width: 25px;
            background-color: #fff;
            margin: 4px 0;
            transition: 0.4s;
        }

        .navbar-links {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
        }

        .navbar-links li {
            margin-left: 20px; /* Adjust for RTL */
        }

        .navbar-links a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            padding: 5px 0;
            transition: color 0.3s ease;
        }

        .navbar-links a:hover {
            color: var(--light-gray);
        }

        /* --- Hero Section --- */
        .hero {
            background-color: var(--light-gray);
            text-align: center;
            padding: 80px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .hero h1 {
            font-size: 2.8em;
            color: var(--text-color);
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2em;
            color: var(--dark-gray);
            margin-bottom: 30px;
        }

        .btn-primary {
            display: inline-block;
            background-color: var(--apple-blue);
            color: #fff;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn-primary:hover {
            background-color: var(--apple-dark-blue);
            transform: translateY(-2px);
        }

        /* --- Main Content Sections --- */
        .article-section {
            background-color: #fff;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .article-section h2 {
            color: var(--apple-blue);
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
        }

        .article-section h3 {
            color: var(--text-color);
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.6em;
        }

        .article-section p {
            margin-bottom: 15px;
            line-height: 1.8;
            font-size: 1.1em;
            color: var(--dark-gray);
        }

        .article-section ul {
            list-style-type: disc;
            margin-right: 25px; /* Adjust for RTL */
            margin-bottom: 15px;
            color: var(--dark-gray);
        }

        .article-section ul li {
            margin-bottom: 8px;
        }

        .highlight-box {
            background-color: var(--highlight-bg);
            border-right: 5px solid var(--apple-blue); /* Adjust for RTL */
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            font-style: italic;
            color: var(--text-color);
        }

        /* --- Call to Action / Next Button --- */
        .cta-section {
            text-align: center;
            padding: 40px 20px;
            background-color: var(--light-gray);
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .cta-section h2 {
            color: var(--apple-blue);
            margin-bottom: 20px;
        }

        /* --- Footer --- */
        footer {
            background-color: var(--text-color);
            color: #fff;
            text-align: center;
            padding: 25px 0;
            margin-top: 40px;
            font-size: 0.9em;
        }

        footer p {
            margin: 0;
        }

        footer a {
            color: var(--apple-blue);
            text-decoration: none;
        }

        /* --- Progress Bar --- */
        #progressBarContainer {
            position: sticky;
            top: var(--navbar-height-desktop); /* Starts below the desktop navbar */
            width: 100%;
            height: 5px;
            background-color: #e0e0e0;
            z-index: 999;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        #progressBar {
            height: 100%;
            width: 0%;
            background-color: var(--apple-blue);
            transition: width 0.1s ease-out, background-color 0.3s ease;
        }

        /* --- Hidden Sections --- */
        .hidden-section {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .hidden-section.revealed {
            display: block; /* Change from none to block */
            opacity: 1;
        }

        /* --- Modal Styles --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: var(--modal-bg);
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--modal-content-bg);
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateY(-50px);
            transition: transform 0.3s ease-in-out;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-content h3 {
            color: var(--apple-blue);
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .modal-content p {
            margin-bottom: 25px;
            color: var(--dark-gray);
            font-size: 1.1em;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .modal-buttons button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .modal-buttons .go-button {
            background-color: green;
            color: white;
        }

        .modal-buttons .go-button:hover {
            background-color: darkgreen;
            transform: translateY(-2px);
        }

        .modal-buttons .stay-button {
            background-color: var(--dark-gray);
            color: white;
        }

        .modal-buttons .stay-button:hover {
            background-color: #555;
            transform: translateY(-2px);
        }

        /* --- Loading Spinner --- */
        .loading-spinner {
            display: none; /* Hidden by default */
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid var(--apple-blue); /* Blue */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto; /* Center the spinner */
        }

        .loading-spinner.active {
            display: block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- Ad Slot Styling (Optional, for visual placeholders) --- */
        .ad-slot {
            min-height: 100px; /* Give some visual space */
            background-color: #f0f0f0;
            border: 1px dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 25px 0;
            font-size: 0.9em;
            color: #888;
            text-align: center;
            padding: 10px;
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
            }

            .menu-toggle {
                display: flex;
            }

            .navbar-links {
                flex-direction: column;
                width: 100%;
                display: none;
                margin-top: 10px;
                text-align: center;
            }

            .navbar-links.active {
                display: flex;
            }

            .navbar-links li {
                margin: 10px 0;
            }

            .hero {
                padding: 60px 15px;
            }

            .hero h1 {
                font-size: 2em;
            }

            .hero p {
                font-size: 1em;
            }

            .article-section {
                padding: 20px;
            }

            .article-section h2 {
                font-size: 1.6em;
            }

            .article-section h3 {
                font-size: 1.3em;
            }

            #progressBarContainer {
                top: var(--navbar-height-mobile); /* Adjust for mobile navbar */
            }
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="#" class="logo">مؤتمر Apple 2025</a>
            <div class="menu-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="navbar-links" id="navbarLinks">
                <li><a href="#hero-section">الرئيسية</a></li>
                <li><a href="#apple-intelligence-section">ذكاء Apple</a></li>
                <li><a href="#liquid-glass-section">Liquid Glass</a></li>
                <li><a href="#os-updates-section">تحديثات الأنظمة</a></li>
                <li><a href="#google-pro-2-5" class="ai-nav-link">Google Pro 2.5</a></li>
                <li><a href="#deep-thinking-cleo" class="ai-nav-link">Deep Thinking Cleo</a></li>
                <li><a href="#gpt-3-new-gen" class="ai-nav-link">GPT-3 New Gen</a></li>
            </ul>
        </nav>
    </header>

    <div id="progressBarContainer">
        <div id="progressBar"></div>
    </div>

    <main class="container">
        <section id="hero-section" class="hero">
            <h1>ملخص مؤتمر المطورين العالمي 2025: ثورة الذكاء الاصطناعي وLiquid Glass</h1>
            <p>كان مؤتمر WWDC 2025 نقطة تحول حقيقية، حيث كشفت Apple عن رؤيتها المستقبلية التي تجمع بين الابتكار البرمجي والتصميم الثوري والذكاء الاصطناعي المتطور.</p>
            <button id="nextButton" class="btn-primary">تابع القراءة: اكتشف ابتكارات الذكاء الاصطناعي</button>
        </section>

        <section id="apple-intelligence-section" class="article-section">
            <h2>Apple Intelligence: الذكاء الاصطناعي المتكامل</h2>
            <p>كان الإعلان الأكبر هو **Apple Intelligence**، وهو نظام ذكاء اصطناعي عميق ومدمج في صميم أنظمة Apple البيئية. يهدف هذا النظام إلى جعل التفاعلات اليومية أكثر سهولة وذكاءً وتخصيصًا، مع الحفاظ على الخصوصية كأولوية قصوى.</p>
            <h3>الميزات الرئيسية لـ Apple Intelligence:</h3>
            <ul>
                <li>**مساعد Siri الجيل الجديد:** أصبح Siri أكثر قدرة على فهم السياق، وإجراء محادثات طبيعية، وتنفيذ مهام معقدة عبر تطبيقات متعددة. يمكنه الآن إدارة جداولك الزمنية، تلخيص رسائل البريد الإلكتروني، وحتى اقتراح الردود بذكاء.</li>
                <li>**الكتابة الذكية والمساعدة الإبداعية:** في تطبيقات مثل Pages وMail، تقدم Apple Intelligence اقتراحات كتابة متقدمة، وتساعد في صياغة النصوص، وتلخيص المستندات الطويلة، وحتى إنشاء محتوى إبداعي بناءً على توجيهات المستخدم.</li>
                <li>**تحسينات الصور والفيديو:** قدرات معززة لتعديل الصور والفيديو، بما في ذلك إزالة الكائنات غير المرغوب فيها بذكاء، وتحسين الإضاءة بشكل تلقائي، وإنشاء مقاطع فيديو مميزة من ذكرياتك.</li>
                <li>**الخصوصية والأمان:** أكدت Apple على أن معالجة البيانات تتم غالبًا على الجهاز للحفاظ على خصوصية المستخدم، ومع المهام التي تتطلب قوة حوسبة أكبر، يتم استخدام "الحوسبة السحابية الخاصة" لضمان أقصى درجات الأمان.</li>
            </ul>
            <div class="highlight-box">
                "Apple Intelligence ليست مجرد مجموعة من الميزات؛ إنها إعادة تعريف لكيفية تفاعلنا مع أجهزتنا، مما يجعلها أكثر قوة وبديهية من أي وقت مضى."
            </div>
            <div class="ad-slot" data-ad-type="adsense">
                <ins class="adsbygoogle"
                     style="display:block; text-align:center;"
                     data-ad-layout="in-article"
                     data-ad-format="fluid"
                     data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                     data-ad-slot="YOUR_ADSENSE_SLOT_ID_1"></ins>
            </div>
        </section>

        <section id="liquid-glass-section" class="article-section">
            <h2>Liquid Glass: لغة تصميم ثورية</h2>
            <p>قدمت Apple لغة تصميم جديدة تمامًا أطلقت عليها اسم **Liquid Glass**. تتجاوز هذه اللغة مجرد الواجهة المرئية لتمتد إلى كيفية إحساسنا وتفاعلنا مع أجهزتنا. إنها تجمع بين الشفافية، الانسيابية، والتفاعل اللمسي لتقديم تجربة مستخدم غامرة.</p>
            <h3>خصائص Liquid Glass:</h3>
            <ul>
                <li>**واجهات شفافة ومتكيفة:** العناصر المرئية تتغير وتتكيف بذكاء مع المحتوى والوضع، مما يخلق إحساسًا بالعمق والسوائل. الأيقونات والنوافذ قد تظهر شبه شفافة، مما يسمح للمحتوى الموجود خلفها بالظهور بشكل جمالي.</li>
                <li>**ردود فعل لمسية متقدمة:** تم تعزيز محرك Taptic Engine لتقديم ردود فعل لمسية أكثر دقة وواقعية، مما يجعل التفاعل مع الواجهة يبدو طبيعيًا وملموسًا بشكل لم يسبق له مثيل.</li>
                <li>**رسوم متحركة انسيابية وواقعية:** كل حركة، من فتح تطبيق إلى التمرير عبر قائمة، تتميز بانسيابية لا مثيل لها، محاكاةً لحركة السوائل.</li>
                <li>**تكامل مع الواقع المعزز (AR):** تفتح Liquid Glass الباب أمام تجارب واقع معزز أكثر اندماجًا وطبيعية، حيث يمكن للعناصر الافتراضية أن تتفاعل بشكل أكثر واقعية مع البيئة الحقيقية.</li>
            </ul>
            <div class="highlight-box">
                "Liquid Glass ليست مجرد جمالية؛ إنها فلسفة تصميم تهدف إلى جعل التكنولوجيا غير مرئية تقريبًا، مع التركيز على المحتوى والتفاعل البشري."
            </div>
        </section>

        <section id="os-updates-section" class="article-section">
            <h2>تحديثات أنظمة التشغيل الرئيسية</h2>
            <p>كما هو متوقع، أعلنت Apple عن تحديثات رئيسية لجميع أنظمة تشغيلها، والتي تستفيد بشكل كبير من Apple Intelligence وLiquid Glass.</p>
            <h3>أبرز التحديثات:</h3>
            <ul>
                <li>**iOS 26 وiPadOS 26:** تجربة مستخدم معاد تصميمها بالكامل مع Liquid Glass، أدوات تحكم محسّنة بالخصوصية، وميزات Apple Intelligence متكاملة في جميع التطبيقات الأساسية. iPadOS 26 يعزز تعدد المهام بشكل لم يسبق له مثيل، مع دعم أفضل للشاشات الخارجية ووضع سطح المكتب المحسن.</li>
                <li>**macOS Tahoe 26:** يقدم macOS Tahoe 26 تحسينات في الأداء والأمان، بالإضافة إلى تكامل أعمق مع Apple Intelligence. تم تحسين تطبيقات الإنتاجية مثل Keynote وNumbers وPages بشكل كبير لزيادة الكفاءة.</li>
                <li>**watchOS 26:** يركز على صحة المستخدم ولياقته البدنية، مع ميزات تتبع صحية جديدة مدعومة بالذكاء الاصطناعي، وواجهات ساعة جديدة تستفيد من Liquid Glass.</li>
                <li>**visionOS 2:** يقدم تحسينات كبيرة لتجربة الواقع المختلط على Apple Vision Pro، مع أدوات مطورين جديدة وميزات تتبع حركة العين واليد أكثر دقة.</li>
            </ul>
            <div class="highlight-box">
                "مع هذه التحديثات، تؤكد Apple التزامها بتقديم تجربة متكاملة وسلسة عبر جميع أجهزتها، مدفوعة بالابتكار والذكاء."
            </div>
            <div class="ad-slot" data-ad-type="iframe" data-ad-key="YOUR_ADMAVEN_IFRAME_KEY_2" data-ad-width="300" data-ad-height="250">
                </div>
        </section>

        <section id="google-pro-2-5" class="article-section hidden-section">
            <h2>Google Pro 2.5: العملاق الجديد في عالم الذكاء الاصطناعي</h2>
            <p>في خطوة مفاجئة، أعلنت Google عن نسخة مطورة من نموذجها اللغوي الكبير، **Google Pro 2.5**. يأتي هذا النموذج بقدرات غير مسبوقة في الفهم والتوليد، مع تركيز خاص على التفكير المنطقي والإبداع متعدد الوسائط. يُقال إنه يقدم قفزة نوعية في قدرة الذكاء الاصطناعي على التعامل مع البيانات المعقدة وإنشاء محتوى أصلي.</p>
            <p>أبرز ما يميز Google Pro 2.5 هو قدرته على فهم ودمج المعلومات من مصادر متعددة (نصوص، صور، فيديو، صوت) بسلاسة غير موجودة في النماذج السابقة. هذا يفتح الباب أمام تطبيقات جديدة كليًا في البحث، إنشاء المحتوى، وحتى التفاعل مع العالم المادي عبر الروبوتات.</p>
            <div class="ad-slot" data-ad-type="script" data-ad-src="https://example.com/some-ad-script.js">
                </div>
        </section>

        <section id="deep-thinking-cleo" class="article-section hidden-section">
            <h2>Deep Thinking Cleo: المساعد الشخصي الثوري</h2>
            <p>تم الكشف عن **Cleo**، المساعد الشخصي المدعوم بالذكاء الاصطناعي من شركة ناشئة غامضة تُدعى "Cognito AI". ما يميز Cleo هو تركيزها على "التفكير العميق" والقدرة على استنتاج النوايا المعقدة للمستخدم، وتوقع الاحتياجات، وتقديم حلول استباقية. إنها ليست مجرد مساعد يجيب على الأسئلة، بل تتصرف كمدير شخصي ذكي يتعلم ويتكيف مع عاداتك.</p>
            <p>تشمل قدرات Cleo إدارة المهام المعقدة، التخطيط لرحلات السفر مع مراعاة أدق التفاصيل، وحتى تقديم نصائح استثمارية بسيطة بناءً على أهدافك المالية، كل ذلك مع واجهة صوتية وطبيعية بشكل لا يصدق.</p>
            <div class="ad-slot" data-ad-type="iframe" data-ad-key="https://ad.doubleclick.net/ddm/adj/N902.138765.ADGROUP/B1234567.8;sz=300x250;ord=[timestamp];" data-ad-width="300" data-ad-height="250">
                 </div>
        </section>

        <section id="gpt-3-new-gen" class="article-section hidden-section">
            <h2>GPT-3 New Gen: تطور جديد في توليد اللغة</h2>
            <p>OpenAI لم تكن بعيدة عن المنافسة، حيث قدمت **GPT-3 New Gen**، الجيل الجديد من نموذجها اللغوي الشهير. يركز هذا الإصدار على تحسينات هائلة في الاتساق المنطقي، وتقليل "الهلوسات" (الأخطاء الواقعية)، وزيادة القدرة على توليد نصوص طويلة ومعقدة مع الحفاظ على الأسلوب والنبرة. يُعد هذا النموذج قفزة كبيرة نحو الذكاء الاصطناعي القادر على الكتابة بطلاقة وإقناع كالبشر.</p>
            <p>كما تم تحسين قدرات GPT-3 New Gen على البرمجة، مما يجعله أداة لا غنى عنها للمطورين، بالإضافة إلى تطبيقاته في إنشاء المحتوى، الترجمة المتقدمة، والتعليم المخصص.</p>
            <div class="ad-slot" data-ad-type="adsense">
                <ins class="adsbygoogle"
                     style="display:block; text-align:center;"
                     data-ad-layout="in-article"
                     data-ad-format="fluid"
                     data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                     data-ad-slot="YOUR_ADSENSE_SLOT_ID_2"></ins>
            </div>
        </section>

        <section class="cta-section">
            <button id="nextButtonBottom" class="btn-primary">تابع القراءة: اكتشف ابتكارات الذكاء الاصطناعي</button>
            <div class="loading-spinner" id="sectionLoadingSpinner"></div>
            <p id="progressFeedback" style="margin-top: 15px; font-weight: bold; color: var(--apple-blue);">
                اقرأ المزيد لفتح الأقسام السرية للذكاء الاصطناعي...
            </p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 ملخص مؤتمر WWDC. جميع الحقوق محفوظة.</p>
    </footer>

    <div id="nextArticleModal" class="modal">
        <div class="modal-content">
            <h3>تهانينا!</h3>
            <p>لقد أكملت قراءة المقال. هل ترغب في الانتقال إلى المقال التالي أو البقاء هنا؟</p>
            <div class="modal-buttons">
                <button id="modalGoButton" class="go-button">اذهب إلى المقال التالي</button>
                <button id="modalStayButton" class="stay-button">ابقَ في المقال</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navbarLinks = document.getElementById('navbarLinks');
            const menuToggle = document.querySelector('.menu-toggle');
            const progressBar = document.getElementById('progressBar');
            const nextArticleModal = document.getElementById('nextArticleModal');
            const modalGoButton = document.getElementById('modalGoButton');
            const modalStayButton = document.getElementById('modalStayButton');
            const nextButton = document.getElementById('nextButton'); // Top button
            const nextButtonBottom = document.getElementById('nextButtonBottom'); // Bottom button
            const aiNavLinks = document.querySelectorAll('.ai-nav-link');
            const sectionLoadingSpinner = document.getElementById('sectionLoadingSpinner');
            const progressFeedback = document.getElementById('progressFeedback');


            // Define the IDs of the new AI sections
            const aiSectionsIds = ['google-pro-2-5', 'deep-thinking-cleo', 'gpt-3-new-gen'];
            
            let revealedAiSectionsCount = 0; // Tracks how many AI sections have been revealed
            let adsLoaded = false;
            let interactionObserved = false; // Track if any user interaction occurred for lazy loading ads
            const SECTION_REVEAL_DELAY = 3000; // 3 seconds delay for revealing sections

            // Toggle Mobile Menu
            if (menuToggle && navbarLinks) {
                menuToggle.addEventListener('click', function() {
                    navbarLinks.classList.toggle('active');
                });

                navbarLinks.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        if (navbarLinks.classList.contains('active')) {
                            navbarLinks.classList.remove('active');
                        }
                    });
                });
            }

            // Lazy Load Ads Function
            function loadAds() {
                if (adsLoaded) return;
                const adSlots = document.querySelectorAll('.ad-slot');

                adSlots.forEach(adSlot => {
                    const adType = adSlot.dataset.adType;

                    if (adType === 'script') {
                        const scriptSrc = adSlot.dataset.adSrc;
                        if (scriptSrc) {
                            const script = document.createElement('script');
                            script.src = scriptSrc;
                            script.async = true;
                            script.referrerPolicy = 'no-referrer-when-downgrade';
                            adSlot.appendChild(script);
                        }
                    } else if (adType === 'iframe') {
                        const adKey = adSlot.dataset.adKey;
                        const adWidth = adSlot.dataset.adWidth;
                        const adHeight = adSlot.dataset.adHeight;
                        if (adKey) {
                            adSlot.innerHTML = ''; // Clear existing content before adding iframe
                            // Check if this is a direct iframe source (e.g., AdMaven's raw iframe URL)
                            if (adKey.includes('http://') || adKey.includes('https://')) {
                                const iframe = document.createElement('iframe');
                                iframe.src = adKey;
                                iframe.width = adWidth || '100%';
                                iframe.height = adHeight || 'auto';
                                iframe.frameBorder = '0';
                                iframe.allowFullscreen = true;
                                iframe.sandbox = 'allow-scripts allow-same-origin allow-popups allow-forms'; // Recommended for iframe ads
                                adSlot.appendChild(iframe);
                            } else { // Assume it's an AdMaven key for their script to dynamically inject iframe
                                const iframeContainerId = `container-${adKey}-${Math.random().toString(36).substr(2, 9)}`; // Generate unique ID for container
                                adSlot.innerHTML = `<div id="${iframeContainerId}"></div>`;

                                const atOptionsScript = document.createElement('script');
                                atOptionsScript.type = 'text/javascript';
                                atOptionsScript.innerHTML = `
                                    var atOptions = {
                                        'key' : '${adKey}',
                                        'format' : 'iframe',
                                        'height' : ${adHeight},
                                        'width' : ${adWidth},
                                        'params' : {}
                                    };
                                    document.getElementById('${iframeContainerId}').innerHTML = '<scr' + 'ipt type="text/javascript" src="//www.highperformanceformat.com/${adKey}/invoke.js"></scr' + 'ipt>';
                                `;
                                adSlot.appendChild(atOptionsScript);
                            }
                        }
                    } else if (adType === 'adsense') {
                        const insTag = adSlot.querySelector('.adsbygoogle');
                        if (insTag) {
                            (window.adsbygoogle = window.adsbygoogle || []).push({});
                        }
                    }
                });
                adsLoaded = true;
                console.log("Ads loaded.");
            }

            // Trigger ad loading on first user interaction (scroll, mousemove, keydown, click, touchstart)
            const interactionEvents = ['scroll', 'mousemove', 'keydown', 'click', 'touchstart'];
            function handleFirstInteraction() {
                if (!interactionObserved) {
                    loadAds();
                    interactionObserved = true;
                    interactionEvents.forEach(event => window.removeEventListener(event, handleFirstInteraction));
                }
            }
            interactionEvents.forEach(event => window.addEventListener(event, handleFirstInteraction, { once: true }));


            // Hide all AI sections and their nav links on load
            aiSectionsIds.forEach(id => {
                const section = document.getElementById(id);
                if (section) section.classList.add('hidden-section');
            });
            aiNavLinks.forEach(link => link.style.display = 'none');


            // Progress Bar Update
            function updateProgressBar() {
                // Total scrollable height of the document
                const fullHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                // How far the user has scrolled from the top
                const scrolledDistance = document.documentElement.scrollTop;

                let scrollPercentage = 0;
                if (fullHeight > 0) {
                    scrollPercentage = (scrolledDistance / fullHeight) * 100;
                }
                
                progressBar.style.width = scrollPercentage + '%';

                // Change progress bar color based on overall completion
                // It turns green only when all AI sections are revealed AND the user has scrolled to the end of the total content
                if (scrollPercentage >= 99 && revealedAiSectionsCount === aiSectionsIds.length) {
                    progressBar.style.backgroundColor = 'green';
                } else {
                    progressBar.style.backgroundColor = 'var(--apple-blue)';
                }
            }

            window.addEventListener('scroll', updateProgressBar);
            updateProgressBar(); // Initial call to set progress bar state on load

            // Function to update the "Next" buttons and feedback text
            function updateNextButtonState() {
                if (revealedAiSectionsCount === aiSectionsIds.length) {
                    const buttonText = 'أنهيت المقال! احصل على هديتك!';
                    nextButton.textContent = buttonText;
                    nextButtonBottom.textContent = buttonText;
                    nextButton.classList.add('pulse-animation'); // Add animation for final state
                    nextButtonBottom.classList.add('pulse-animation');
                    progressFeedback.textContent = 'تهانينا! لقد فتحت جميع الأقسام. اضغط على الزر للحصول على هديتك!';
                    progressBar.style.backgroundColor = 'green'; // Immediately green if all sections revealed
                } else {
                    const sectionsRemaining = aiSectionsIds.length - revealedAiSectionsCount;
                    const buttonText = `تابع القراءة: اكتشف (${revealedAiSectionsCount + 1} من ${aiSectionsIds.length}) من ابتكارات الذكاء الاصطناعي`;
                    nextButton.textContent = buttonText;
                    nextButtonBottom.textContent = buttonText;
                    nextButton.classList.remove('pulse-animation'); // Remove animation
                    nextButtonBottom.classList.remove('pulse-animation');
                    progressFeedback.textContent = `تبقى لك ${sectionsRemaining} قسم لفتحه. استمر في القراءة!`;
                    progressBar.style.backgroundColor = 'var(--apple-blue)'; // Reset color if not all revealed
                }
            }


            // Handle "Next" button click for sequential content revelation
            function handleNextButtonClick() {
                if (revealedAiSectionsCount < aiSectionsIds.length) {
                    // Disable buttons and show spinner during delay
                    nextButton.disabled = true;
                    nextButtonBottom.disabled = true;
                    sectionLoadingSpinner.classList.add('active');
                    progressFeedback.textContent = 'جارٍ تحميل القسم التالي... يرجى الانتظار!';

                    setTimeout(() => {
                        // Reveal the next AI section
                        const sectionIdToReveal = aiSectionsIds[revealedAiSectionsCount];
                        const sectionToReveal = document.getElementById(sectionIdToReveal);
                        if (sectionToReveal) {
                            sectionToReveal.classList.remove('hidden-section');
                            sectionToReveal.classList.add('revealed'); // Add revealed class for fade-in effect
                            // Also show its corresponding nav link
                            if (aiNavLinks[revealedAiSectionsCount]) {
                                aiNavLinks[revealedAiSectionsCount].style.display = 'block';
                            }
                            sectionToReveal.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            revealedAiSectionsCount++;
                            updateProgressBar(); // Recalculate and update progress bar after revealing new content
                            updateNextButtonState(); // Update button text and feedback
                            
                            // Re-enable buttons and hide spinner
                            nextButton.disabled = false;
                            nextButtonBottom.disabled = false;
                            sectionLoadingSpinner.classList.remove('active');
                        }
                    }, SECTION_REVEAL_DELAY);
                } else {
                    // All AI sections have been revealed and clicked through, now show the final win modal
                    nextArticleModal.classList.add('show');
                    document.querySelector('#nextArticleModal h3').textContent = 'تهانينا، لقد أنهيت المقال!';
                    document.querySelector('#nextArticleModal p').textContent = 'لقد أكملت قراءة جميع الأقسام. هل ترغب في المطالبة بهديتك؟';
                    modalGoButton.textContent = 'اذهب للرابط الخاص بك!';
                    // Change the "Go" button's action to the final winning link
                    modalGoButton.onclick = function() {
                        window.location.href = 'https://bot-sofai-4h.rf.gd/api/freefire/i.php';
                    };
                    modalStayButton.textContent = 'ابقَ في المقال';
                }
            }

            nextButton.addEventListener('click', handleNextButtonClick);
            nextButtonBottom.addEventListener('click', handleNextButtonClick);

            // Modal Stay button logic (closes the modal without navigating)
            modalStayButton.addEventListener('click', function() {
                nextArticleModal.classList.remove('show');
            });

            // Dynamic adjustment of progress bar top based on navbar height for sticky positioning
            function adjustProgressBarTop() {
                const navbar = document.querySelector('.navbar');
                if (navbar) {
                    const navbarHeight = navbar.offsetHeight;
                    document.documentElement.style.setProperty('--navbar-height-desktop', `${navbarHeight}px`);
                    document.documentElement.style.setProperty('--navbar-height-mobile', `${navbarHeight}px`);
                }
            }
            
            adjustProgressBarTop();
            window.addEventListener('resize', adjustProgressBarTop); // Adjust on window resize
            updateNextButtonState(); // Initial call to set button text and feedback
        });
    </script>
</body>
</html>
